{"version":3,"sources":["db/firestore.js","api/counterRepository.js","components/emoji/Emoji.js","pages/counter/Counter.js","pages/user-form/UserForm.js","api/userRepository.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","setPersistence","browserLocalPersistence","countersRef","collection","createCounter","uid","a","addDoc","value","getCounter","type","q","query","where","getDocs","counters","docs","data","id","setCounterValue","newValue","counterRef","doc","updateDoc","getCounterListener","setCounter","unsubscribe","onSnapshot","get","Emoji","props","className","role","aria-label","label","aria-hidden","style","fontSize","symbol","Counter","handleSignOut","useState","counter","useEffect","counterValue","handleIncrement","handleReset","Fragment","onClick","Button","variant","UserForm","mode","handleAuthentication","formState","email","setEmail","password","setPassword","Form","Group","controlId","Control","placeholder","onChange","e","target","createUser","user","setDoc","created","metadata","creationTime","lastSignIn","lastSignInTime","App","useAuthState","navigate","useNavigate","onAuthStateChanged","handleSignInUser","handleSignUpUser","createUserWithEmailAndPassword","response","signInWithEmailAndPassword","signOut","path","element","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.7d47ee3b.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth, browserLocalPersistence } from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyD3JgRl5KWKzWo-tVXoMqKc5HZzoNr8r5Q',\n  authDomain: 'days-since-f2f53.firebaseapp.com',\n  projectId: 'days-since-f2f53',\n  storageBucket: 'days-since-f2f53.appspot.com',\n  messagingSenderId: '770516759412',\n  appId: '1:770516759412:web:6a858719defadfc696f221',\n  measurementId: 'G-EDN478SNWY',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\nauth.setPersistence(browserLocalPersistence);\n\nexport { db, auth };\n","import { db } from '../db/firestore';\nimport {\n  doc,\n  collection,\n  query,\n  where,\n  updateDoc,\n  getDocs,\n  addDoc,\n  onSnapshot,\n} from 'firebase/firestore';\n\nconst countersRef = collection(db, 'counters');\n\nconst createCounter = async (uid) => {\n  await addDoc(collection(db, 'counters'), {\n    value: 0,\n    uid: uid,\n  });\n};\n\nconst getCounter = async (uid, type) => {\n  const q = query(countersRef, where('uid', '==', uid));\n  const counters = await getDocs(q);\n  if (type === 'value') {\n    return counters.docs[0].data().value;\n  } else if (type === 'ref') {\n    return counters.docs[0].id;\n  }\n};\n\nconst setCounterValue = async (newValue, id) => {\n  const counterRef = doc(db, 'counters', id);\n  await updateDoc(counterRef, {\n    value: newValue,\n  });\n};\n\nconst getCounterListener = async (setCounter) => {\n  const unsubscribe = onSnapshot(doc(db, 'counters', 'counter'), (doc) => {\n    setCounter(doc.get('value'));\n  });\n  return unsubscribe;\n};\nexport { createCounter, getCounter, setCounterValue, getCounterListener };\n","import React from \"react\";\nimport \"./Emoji.css\";\nconst Emoji = (props) => (\n  <div\n    className=\"emoji\"\n    role=\"img\"\n    aria-label={props.label ? props.label : \"\"}\n    aria-hidden={props.label ? \"false\" : \"true\"}\n    style={{ fontSize: props.fontSize }}\n  >\n    {props.symbol}\n  </div>\n);\nexport default Emoji;\n","import { getCounter, setCounterValue, getCounterListener } from '../../api/counterRepository';\nimport React, { useState, useEffect } from 'react';\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport { db } from '../../db/firestore';\nimport Emoji from '../../components/emoji/Emoji';\nimport Button from 'react-bootstrap/Button';\nimport './Counter.css';\n\nconst Counter = ({ handleSignOut, uid }) => {\n  const [counter, setCounter] = useState(null);\n  useEffect(() => {\n    if (uid) {\n      (async () => {\n        const counterValue = await getCounter(uid, 'value');\n        setCounter(counterValue);\n      })();\n\n      // // TODO: Should be placed in the repo, but don't know how\n      // const unsubscribe = onSnapshot(doc(db, 'counters', 'counter'), (doc) => {\n      //   setCounter(doc.get('value'));\n      // });\n      return () => getCounterListener(setCounter);\n    }\n  }, [uid]);\n\n  const handleIncrement = async () => {\n    if (uid) {\n      setCounter(counter + 1);\n      const id = await getCounter(uid, 'ref');\n      setCounterValue(counter + 1, id);\n    }\n  };\n\n  const handleReset = async () => {\n    if (uid) {\n      setCounter(0);\n      const id = await getCounter(uid, 'ref');\n      setCounterValue(0, id);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"title\">\n        <h1 className=\"heading\">Days Since 🔥</h1>\n        <Emoji symbol=\"\" fontSize={50} />\n      </div>\n      <h1 className=\"counter\">{counter}</h1>\n      <div className=\"increment-reset\">\n        <div className=\"emoji-container\" onClick={handleIncrement}>\n          <Emoji symbol=\"✅\" fontSize={100} />\n        </div>\n        <div className=\"emoji-container\" onClick={handleReset}>\n          <Emoji symbol=\"❌\" fontSize={100} />\n        </div>\n      </div>\n      <Button variant=\"primary\" onClick={handleSignOut}>\n        Sign Out\n      </Button>\n    </React.Fragment>\n  );\n};\n\nexport default Counter;\n","import Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport React, { useState } from 'react';\n\nconst UserForm = ({ mode, handleAuthentication }) => {\n  const [formState] = useState(mode === 'sign-in' ? 'Sign In' : 'Sign Up');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <Form>\n      <h1>{formState}</h1>\n      <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n        <Form.Control type=\"email\" placeholder=\"Email\" onChange={(e) => setEmail(e.target.value)} />\n      </Form.Group>\n\n      <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n        <Form.Control\n          type=\"password\"\n          placeholder=\"Password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </Form.Group>\n      <Button variant=\"primary\" onClick={() => handleAuthentication(mode, email, password)}>\n        {formState}\n      </Button>\n    </Form>\n  );\n};\n\nexport default UserForm;\n","import { db } from '../db/firestore';\nimport { doc, setDoc } from 'firebase/firestore';\n\nconst createUser = async (user) => {\n  await setDoc(doc(db, 'users', user.uid), {\n    email: user.email,\n    created: user.metadata.creationTime,\n    lastSignIn: user.metadata.lastSignInTime,\n  });\n};\n\nexport { createUser };\n","import { Routes, Route, useNavigate } from 'react-router-dom';\nimport Counter from './pages/counter/Counter';\nimport UserForm from './pages/user-form/UserForm';\nimport { auth } from './db/firestore';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { createUser } from './api/userRepository';\nimport './App.css';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useEffect, useState } from 'react';\nimport { createCounter } from './api/counterRepository';\n\nconst App = () => {\n  const [user] = useAuthState(auth);\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        navigate('/');\n      } else {\n        navigate('/sign-up');\n      }\n    });\n    return () => unsubscribe();\n  }, [navigate]);\n\n  const handleAuthentication = async (mode, email, password) => {\n    mode === 'sign-in'\n      ? handleSignInUser(auth, email, password)\n      : handleSignUpUser(auth, email, password);\n  };\n\n  // TODO: Error handling\n  const handleSignUpUser = async (auth, email, password) => {\n    const response = await createUserWithEmailAndPassword(auth, email, password);\n    createUser(response.user);\n    createCounter(response.user.uid);\n  };\n\n  // TODO: Error handling\n  const handleSignInUser = async (auth, email, password) => {\n    return await signInWithEmailAndPassword(auth, email, password);\n  };\n\n  // TODO: Error handling\n  const handleSignOut = async () => {\n    await signOut(auth);\n  };\n\n  return (\n    <div className=\"App\">\n      <>\n        <Routes>\n          <Route path=\"/\" element={<Counter handleSignOut={handleSignOut} uid={user?.uid} />} />\n          <Route\n            path=\"/sign-in\"\n            element={<UserForm mode=\"sign-in\" handleAuthentication={handleAuthentication} />}\n          />\n          <Route\n            path=\"/sign-up\"\n            element={<UserForm mode=\"sign-up\" handleAuthentication={handleAuthentication} />}\n          />\n        </Routes>\n      </>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename=\"/days-since\">\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
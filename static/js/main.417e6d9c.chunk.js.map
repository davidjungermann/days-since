{"version":3,"sources":["db/firestore.js","api/counterRepository.js","components/emoji/Emoji.js","pages/counter/Counter.js","pages/user-form/UserForm.js","api/userRepository.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","setPersistence","browserLocalPersistence","countersRef","collection","createCounter","uid","a","addDoc","value","streak","getCounter","q","query","where","getDocs","counters","docs","setCounterValue","newValue","id","counterRef","doc","updateDoc","setStreakValue","getCounterListener","setCounter","unsubscribe","onSnapshot","get","Emoji","props","className","role","aria-label","label","aria-hidden","style","fontSize","symbol","Counter","handleSignOut","email","useState","counter","setStreak","useEffect","data","handleIncrement","handleStreak","handleReset","Fragment","Container","Row","Col","onClick","Button","variant","UserForm","mode","handleAuthentication","formState","setEmail","password","setPassword","Form","Group","controlId","Control","type","placeholder","onChange","e","target","createUser","user","setDoc","created","metadata","creationTime","lastSignIn","lastSignInTime","App","useAuthState","navigate","useNavigate","onAuthStateChanged","handleSignInUser","handleSignUpUser","createUserWithEmailAndPassword","response","signInWithEmailAndPassword","signOut","path","element","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.417e6d9c.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth, browserLocalPersistence } from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyD3JgRl5KWKzWo-tVXoMqKc5HZzoNr8r5Q',\n  authDomain: 'days-since-f2f53.firebaseapp.com',\n  projectId: 'days-since-f2f53',\n  storageBucket: 'days-since-f2f53.appspot.com',\n  messagingSenderId: '770516759412',\n  appId: '1:770516759412:web:6a858719defadfc696f221',\n  measurementId: 'G-EDN478SNWY',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\nauth.setPersistence(browserLocalPersistence);\n\nexport { db, auth };\n","import { db } from '../db/firestore';\nimport {\n  doc,\n  collection,\n  query,\n  where,\n  updateDoc,\n  getDocs,\n  addDoc,\n  onSnapshot,\n} from 'firebase/firestore';\n\nconst countersRef = collection(db, 'counters');\n\nconst createCounter = async (uid) => {\n  await addDoc(collection(db, 'counters'), {\n    value: 0,\n    uid: uid,\n    streak: 0,\n  });\n};\n\nconst getCounter = async (uid) => {\n  const q = query(countersRef, where('uid', '==', uid));\n  const counters = await getDocs(q);\n  return counters.docs[0];\n};\n\nconst setCounterValue = async (newValue, id) => {\n  const counterRef = doc(db, 'counters', id);\n  await updateDoc(counterRef, {\n    value: newValue,\n  });\n};\n\nconst setStreakValue = async (newValue, id) => {\n  const counterRef = doc(db, 'counters', id);\n  await updateDoc(counterRef, {\n    streak: newValue,\n  });\n};\n\nconst getCounterListener = async (setCounter) => {\n  const unsubscribe = onSnapshot(doc(db, 'counters', 'counter'), (doc) => {\n    setCounter(doc.get('value'));\n  });\n  return unsubscribe;\n};\nexport { createCounter, getCounter, setCounterValue, setStreakValue, getCounterListener };\n","import React from \"react\";\nimport \"./Emoji.css\";\nconst Emoji = (props) => (\n  <div\n    className=\"emoji\"\n    role=\"img\"\n    aria-label={props.label ? props.label : \"\"}\n    aria-hidden={props.label ? \"false\" : \"true\"}\n    style={{ fontSize: props.fontSize }}\n  >\n    {props.symbol}\n  </div>\n);\nexport default Emoji;\n","import {\n  getCounter,\n  setCounterValue,\n  setStreakValue,\n  getCounterListener,\n} from '../../api/counterRepository';\nimport React, { useState, useEffect } from 'react';\nimport Emoji from '../../components/emoji/Emoji';\nimport { Container, Row, Button, Col } from 'react-bootstrap';\nimport './Counter.css';\n\nconst Counter = ({ handleSignOut, uid, email }) => {\n  const [counter, setCounter] = useState(null);\n  const [streak, setStreak] = useState(null);\n\n  useEffect(() => {\n    if (uid) {\n      (async () => {\n        const counterRef = await getCounter(uid);\n        setCounter(counterRef.data().value);\n        setStreak(counterRef.data().streak);\n      })();\n\n      return () => getCounterListener(setCounter);\n    }\n  }, [uid]);\n\n  const handleIncrement = async () => {\n    if (uid) {\n      const newValue = counter + 1;\n      setCounter(newValue);\n      const counterRef = await getCounter(uid);\n      setCounterValue(newValue, counterRef.id);\n      handleStreak(newValue, counterRef.id);\n    }\n  };\n\n  const handleReset = async () => {\n    if (uid) {\n      setCounter(0);\n      const counterRef = await getCounter(uid);\n      setCounterValue(0, counterRef.id);\n    }\n  };\n\n  const handleStreak = async (newValue, uid) => {\n    if (newValue > streak) {\n      setStreak(newValue);\n      setStreakValue(newValue, uid);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <Container>\n        <Row>\n          <Col>\n            <h5>Longest Streak</h5>\n            {uid && <span>{streak}</span>}\n          </Col>\n          <Col>\n            <h2>Days Since 🔥</h2>\n            <h1 className=\"counter\">{counter}</h1>\n            <div className=\"increment-reset\">\n              <div className=\"emoji-container\" onClick={handleIncrement}>\n                <Emoji symbol=\"✅\" fontSize={100} />\n              </div>\n              <div className=\"emoji-container\" onClick={handleReset}>\n                <Emoji symbol=\"❌\" fontSize={100} />\n              </div>\n            </div>\n          </Col>\n          <Col>\n            {email && <h5>{email}</h5>}\n            <Button variant=\"primary\" onClick={handleSignOut}>\n              Sign Out\n            </Button>\n          </Col>\n        </Row>\n      </Container>\n    </React.Fragment>\n  );\n};\n\nexport default Counter;\n","import Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport React, { useState } from 'react';\n\nconst UserForm = ({ mode, handleAuthentication }) => {\n  const [formState] = useState(mode === 'sign-in' ? 'Sign In' : 'Sign Up');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <Form>\n      <h1>{formState}</h1>\n      <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n        <Form.Control type=\"email\" placeholder=\"Email\" onChange={(e) => setEmail(e.target.value)} />\n      </Form.Group>\n\n      <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n        <Form.Control\n          type=\"password\"\n          placeholder=\"Password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </Form.Group>\n      <Button variant=\"primary\" onClick={() => handleAuthentication(mode, email, password)}>\n        {formState}\n      </Button>\n    </Form>\n  );\n};\n\nexport default UserForm;\n","import { db } from '../db/firestore';\nimport { doc, setDoc } from 'firebase/firestore';\n\nconst createUser = async (user) => {\n  await setDoc(doc(db, 'users', user.uid), {\n    email: user.email,\n    created: user.metadata.creationTime,\n    lastSignIn: user.metadata.lastSignInTime,\n  });\n};\n\nexport { createUser };\n","import { Routes, Route, useNavigate } from 'react-router-dom';\nimport Counter from './pages/counter/Counter';\nimport UserForm from './pages/user-form/UserForm';\nimport { auth } from './db/firestore';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { createUser } from './api/userRepository';\nimport './App.css';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useEffect, useState } from 'react';\nimport { createCounter } from './api/counterRepository';\n\nconst App = () => {\n  const [user] = useAuthState(auth);\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        navigate('/');\n      } else {\n        navigate('/sign-in');\n      }\n    });\n    return () => unsubscribe();\n  }, [navigate]);\n\n  const handleAuthentication = async (mode, email, password) => {\n    mode === 'sign-in'\n      ? handleSignInUser(auth, email, password)\n      : handleSignUpUser(auth, email, password);\n  };\n\n  // TODO: Error handling\n  const handleSignUpUser = async (auth, email, password) => {\n    const response = await createUserWithEmailAndPassword(auth, email, password);\n    createUser(response.user);\n    createCounter(response.user.uid);\n  };\n\n  // TODO: Error handling\n  const handleSignInUser = async (auth, email, password) => {\n    return await signInWithEmailAndPassword(auth, email, password);\n  };\n\n  // TODO: Error handling\n  const handleSignOut = async () => {\n    await signOut(auth);\n  };\n\n  return (\n    <div className=\"App\">\n      <>\n        <Routes>\n          <Route\n            path=\"/\"\n            element={<Counter handleSignOut={handleSignOut} uid={user?.uid} email={user?.email} />}\n          />\n          <Route\n            path=\"/sign-in\"\n            element={<UserForm mode=\"sign-in\" handleAuthentication={handleAuthentication} />}\n          />\n          <Route\n            path=\"/sign-up\"\n            element={<UserForm mode=\"sign-up\" handleAuthentication={handleAuthentication} />}\n          />\n        </Routes>\n      </>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename=\"/days-since\">\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}